language: cpp
dist: trusty
sudo: required

before_install: ./scripts/travis-checkout.sh

install: ./scripts/travis-install-${TRAVIS_OS_NAME}.sh

before_script:
  - qbs setup-toolchains --detect

# sadly Qt 5.8 ppa not in travis whitelist so need sudo https://github.com/travis-ci/apt-source-whitelist/issues/357
matrix:
  include:
  - os: linux
    env: QBS_PROFILE=gcc PATH=/opt/qt58/bin:$PATH
  - os: osx
    env: QBS_PROFILE=clang

script:
  - qbs install profile:${QBS_PROFILE} release qbs.installRoot:./dist
  - tree ./dist
